
問3.2

`- fun id x = x`の型は：

`val id = fn : 'a -> 'a`であり、~これにより~

「ここで，`'a`は任意の型を表す多相型変数である」。「そこでid idの1番目のidと２番目のidの型をそれぞれ X -> XおよびY -> Yと置くことができる」。

「前者が後者に適用されているので，X = Y -> Yであり，かつこの式全体の型はXである」。

`id = fn : ('a -> 'a) -> ('a -> 'a)`
-> `id id = fn : 'a -> 'a`となる。

「よってid idの型はY -> Yと書ける．」

回答者のコメント：筆者の回答は、明確に行間を埋めており、すごいと思った。

次に、`val f = fn : 'a -> 'b`とする。

「式f xの型が正しいとすると」、このとき`x: 'a`であ ~るなら~ り、`f x: 'b`となる。

よって、`- fn x => fx`の型は`'a -> 'b`となる。

`- fn x => id id x`の型は、よって、

最初の`id`の型は` ('a -> 'a) -> ('a -> 'a)`となり、
次の`id`の型は`'a -> 'a`となり、
`id id`の型は、`'a -> 'a`となり、よって、

`val it = fn : 'a -> 'a`となる。

回答者のコメント：私の回答では、すべて多相型であるという仮定のもとで推論していたが、正しく導いた型が任意の型であるのかどうかが明示されていないため、回答としては完全ではない。
