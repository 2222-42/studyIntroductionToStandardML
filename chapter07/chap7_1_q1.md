# 問7.1

pre-order表現に使用する文字列を固定すると、任意の二分木は、唯一のpre-order表現をもつことを示せ

示すこと：
1. 任意の2分木はpre-order表現をもつ
2. 2分木TとT'が同一のpre-order表現を持てば、T=T'である

## 1

帰納法で示す。

(Case 0)高さ1の木、つまり、空の木は空の文字列になるので、pre-order表現を持つ

(Case h)高さhの木がpre-order表現をもつとする。

この時、高さh+1の木がpre-order表現をもつことを証明する。

高さh+1の木の左部分木と右部分木の少なくともいずれか1つは高さhであるとする。

このとき、帰納法の仮定より、左部分木Lと右部分木RのいずれもS_LとS_Rのpre-order表現をもつ。

データの一部として使用されていない2文字を取る。なお、部分木の中で区切り文字として使われていた(データの一部として使用されていない)2文字が、もう一方の木にあったり、aに含まれている場合は、新たな文字を取り出し、それをそれぞれの部分木に置換する。

(高さh+1の木のルートをaとする)

これにより、a(S_L)(S_R)というpre-order表現が得られる。

よって、任意の高さの2分木はpre-order表現をもち、よって、任意の2分木はpre-order表現をもつ。

## 2

方針1: 2分木TとT'が同じpre-order表現を持っているのに、TとT'が異なることを仮定し、矛盾を導く

方針2: TとT'が異なる二分木であると仮定して、異なるpre-order表現をもっていることを示す

TとT'が異なる二分木であると仮定する。

以下の要領で木を探索していけば、異なるpre-order 表現であることが示せる。

Rootから左の部分木から見ていく。

TとT'の構成子において、その型が異なれば(EmptyとNodeであれば)、片方のpre-order表現には`()` もう一方のは`(x, ...)`となるので、表現が異なる。

型が同じで、かつ、
- TとT'のデータが異なれば、それぞれのpre-order表現において異なる文字列となる。
- TとT'のデータが同じであれば、
  - TとT'の左部分木と右部分木の両方ともEmptyであれば、他の調べていない枝を調べる。
  - TとT'の左部分木について、同様に調べる。

以上により、2分木が異なれば、pre-order表現において異なる文字列が生じる個所を特定することが可能である。

よって、分木TとT'が同一のpre-order表現を持てば、T=T'である。

## 筆者の解答

1. 木がEmptyの時。空文字列が唯一のpre-order表現である。
2. 木がNode(a, T,T′)の時。 帰納法の仮定より、TおよびT′はそれぞれ唯一のpre-order表現P,P′をもつ。 
与えられた木はpre-order表現a(P)(P′)を持つ。
P,P′が唯一の表現であるから、 この表現も唯一である。

こっちの方がすごいシンプル。
